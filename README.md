# Class-PQC
In this repository, we explore the Open Quantum Safe (liboqs) library to understand and implement post-quantum cryptographic algorithms.

---

## **Overview**

This project demonstrates:

1. **Key Generation (Alice)**:
   - Generates a public/private key pair using the ML-KEM 1024-bit post-quantum cryptographic algorithm.
   - Saves the keys in binary format.

2. **Key Encapsulation (Bob)**:
   - Encapsulates a shared secret using Alice's public key.
   - Produces a ciphertext and stores it for decapsulation.

3. **Key Decapsulation (Alice2)**:
   - Recovers the shared secret using Alice's private key and Bob's ciphertext.
   - Verifies that the recovered shared secret matches the original plaintext shared secret generated by Bob.

4. **Hexadecimal Key Display**:
   - Provides detailed insights into key formats by printing them in hexadecimal.

5. **File Management**:
   - Reads and writes binary files for key and ciphertext storage.

---

## **Usage**

> [!IMPORTANT]
> **Prerequisites**
> Before running the programs, ensure you have all required libraries and tools installed. If not, refer to the [**Environment Setup**](#environment-setup) section for detailed instructions.

---

### **Compilation**

The `Makefile` is configured to compile all necessary programs. Run the following command:

```bash
make
```

This will generate the executables:
- `alice_kem`
- `bob_kem`
- `alice2_kem`

---

### **Execution Workflow**

1. **Generate Keys (Alice):**
   Run Alice's key generation program:
   ```bash
   ./alice_kem
   ```
   Outputs:
   - `public_key_1024.bin`
   - `secret_key_1024.bin`

2. **Encapsulate Secret (Bob):**
   Run Bob's key encapsulation program:
   ```bash
   ./bob_kem
   ```
   Outputs:
   - `ciphertext.bin`
   - Encapsulated shared secret printed in hexadecimal.

3. **Decapsulate Secret (Alice2):**
   Run Alice2's key decapsulation program:
   ```bash
   ./alice2_kem
   ```
   Outputs:
   - Recovered shared secret printed in hexadecimal.

4. **Validation:**
   Compare the shared secret printed by `bob_kem` with the one recovered by `alice2_kem`. Both should match.

---

## **Implementation Details**

### **Alice's Key Generation (`alice_kem.cpp`)**
- **Algorithm:** ML-KEM 1024-bit.
- **Outputs:**
  - Public and private keys.
  - Saves keys to `public_key_1024.bin` and `secret_key_1024.bin`.

### **Bob's Key Encapsulation (`bob_kem.cpp`)**
- Reads Alice's public key from `public_key_1024.bin`.
- Encapsulates a shared secret and generates a ciphertext.
- Saves ciphertext to `ciphertext.bin`.

### **Alice's Decapsulation (`alice2_kem.cpp`)**
- Reads the private key (`secret_key_1024.bin`) and ciphertext (`ciphertext.bin`).
- Recovers the shared secret using Alice's private key.

### **Error Handling**
Each program handles errors gracefully, including:
- Memory allocation failures.
- File I/O issues.
- Decapsulation failures.

---

## **Demo Video**

https://github.com/user-attachments/assets/17fa1a5c-0d63-4598-9110-1b4dd12f3302

---

## **Environment Setup**
  
### **Dependencies**
- [liboqs](https://github.com/open-quantum-safe/liboqs)
- C++ compiler (e.g., `g++`)
- Make

### **Setup Instructions**
> [!IMPORTANT]
> This repository is built using **Nix Flakes**. It is highly recommended to install **Nix** and enable flakes for a seamless development experience. Follow the steps below:
>
>1. **Install Nix**:
>   Visit the [Nix Installation Guide](https://nixos.org/download/) and follow the instructions for your operating system.
>
> 2. **Enable Flakes**:
>   Add the following line to your Nix configuration file (`/etc/nix/nix.conf`):
>   ```bash
>   experimental-features = nix-command flakes
>   ```
> 
> Using Nix Flakes simplifies dependency management and ensures reproducibility across systems.

1. Clone the repository:
   ```bash
   git clone https://github.com/Lemos1347/Class-PQC
   cd Class-PQC
   ```

2. Install dependencies using the `flake.nix` configuration:
   ```bash
   nix develop
   ```

3. Build the project:
   ```bash
   make
   ```
